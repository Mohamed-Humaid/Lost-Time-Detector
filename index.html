<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lost Time Detector</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-orbit"></div>
    <div class="bg-grid"></div>

    <main class="page">
      <header class="hero">
        <div class="hero-text">
          <p class="eyebrow">AI-Powered Productivity Analyzer</p>
          <h1>Lost Time Detector</h1>
          <p class="lead">
            Log your day, reveal hidden time leaks, and get clear, actionable
            suggestions for a sharper routine.
          </p>
          <div class="hero-actions">
            <button class="btn primary" id="scrollToForm">Start logging</button>
            <button class="btn ghost" id="demoFill">Load demo data</button>
          </div>
        </div>
        <div class="hero-card">
          <h2>Today at a glance</h2>
          <div class="mini-stats">
            <div>
              <span class="label">Focus score</span>
              <strong id="heroScore">--</strong>
            </div>
            <div>
              <span class="label">Status</span>
              <strong id="heroStatus">Not rated</strong>
            </div>
            <div>
              <span class="label">Trend</span>
              <strong id="heroTrend">Awaiting data</strong>
            </div>
          </div>
          <div class="chip-row">
            <span class="chip">Behavioral insight</span>
            <span class="chip">Time leak scan</span>
            <span class="chip">Personal plan</span>
          </div>
        </div>
      </header>

      <section class="section" id="formSection">
        <div class="section-title">
          <h2>Daily productivity log</h2>
          <p>Capture the inputs that drive your score and insights.</p>
        </div>
        <form class="log-form" id="logForm">
          <div class="timetable">
            <div class="timetable-controls">
              <div class="activity-picker">
                <button class="activity-btn is-active" type="button" data-activity="study">
                  Study
                </button>
                <button class="activity-btn" type="button" data-activity="social">
                  Social
                </button>
                <button class="activity-btn" type="button" data-activity="entertainment">
                  Entertainment
                </button>
                <button class="activity-btn" type="button" data-activity="sleep">
                  Sleep
                </button>
                <button class="activity-btn" type="button" data-activity="tasks">
                  Tasks
                </button>
                <button class="activity-btn" type="button" data-activity="other">
                  Other
                </button>
              </div>
              <div class="picker-meta">
                <span class="label">Selected activity</span>
                <strong id="activeActivityLabel">Study</strong>
              </div>
              <div class="control-actions">
                <button class="btn ghost" type="button" id="clearSelection">
                  Clear selection
                </button>
                <button class="btn ghost" type="button" id="resetSchedule">
                  Reset day
                </button>
              </div>
              <div class="quick-inputs">
                <label class="field">
                  <span>Tasks completed</span>
                  <input type="number" min="0" step="1" id="tasksInput" required />
                </label>
                <label class="field">
                  <span>Main goal for the day</span>
                  <input
                    type="text"
                    id="goalInput"
                    placeholder="e.g., Finish chapter 3"
                    required
                  />
                </label>
              </div>
            </div>

            <p class="helper">
              Drag across the timeline to assign the selected activity. Click a
              slot to fill a single 1-hour block. Click a time tick to fill
              from 00:00 up to that hour.
            </p>
            <div class="timeline">
              <div class="timeline-scroll">
                <div class="timeline-track" id="timetableGrid"></div>
                <div class="timeline-ticks" id="timelineTicks"></div>
              </div>
            </div>
          </div>

          <div class="timetable-summary">
            <div class="summary-card">
              <h3>Time allocation</h3>
              <ul class="summary-list">
                <li><span>Study</span><strong id="totalStudy">0.0h</strong></li>
                <li><span>Social</span><strong id="totalSocial">0.0h</strong></li>
                <li><span>Entertainment</span><strong id="totalEntertainment">0.0h</strong></li>
                <li><span>Sleep</span><strong id="totalSleep">0.0h</strong></li>
                <li><span>Tasks</span><strong id="totalTasks">0.0h</strong></li>
                <li><span>Other</span><strong id="totalOther">0.0h</strong></li>
                <li><span>Unaccounted</span><strong id="totalUnaccounted">24.0h</strong></li>
              </ul>
            </div>

            <div class="ai-settings">
              <p class="helper">
                AI insights are generated via a local OpenAI proxy. Your API key
                stays on the server, not in the browser.
              </p>
            </div>
          </div>

          <div class="form-actions">
            <button class="btn primary" type="submit">Calculate score</button>
            <button class="btn" type="button" id="generateInsights">Generate insights</button>
            <button class="btn ghost" type="reset">Clear</button>
          </div>
        </form>
      </section>

      <section class="section results" id="resultsSection">
        <div class="section-title">
          <h2>Dashboard</h2>
          <p>Score, status, and personalized guidance.</p>
        </div>
        <div class="results-grid">
          <div class="score-card">
            <div class="score-header">
              <span>Productivity score</span>
              <span class="pill" id="scoreStatus">Not rated</span>
            </div>
            <div class="score-value" id="scoreValue">--</div>
            <p class="score-note" id="scoreNote">
              Log your day to see a score.
            </p>
            <div class="score-scale">
              <span>0</span>
              <span>50</span>
              <span>100</span>
            </div>
          </div>

          <div class="score-card unaccounted-card">
            <div class="score-header">
              <span>Unaccounted hours</span>
              <span class="pill" id="unaccountedStatus">Not rated</span>
            </div>
            <div class="score-value" id="unaccountedValue">--</div>
            <p class="score-note" id="unaccountedNote">
              Add your hours to see what is missing.
            </p>
            <div class="score-scale">
              <span>0</span>
              <span>12</span>
              <span>24</span>
            </div>
          </div>

          <div class="insights-card">
            <h3>AI insights</h3>
            <div class="insight-block">
              <h4>Time leak analysis</h4>
              <p id="leakInsight">No analysis yet.</p>
            </div>
            <div class="insight-block">
              <h4>Behavioral insight</h4>
              <p id="behaviorInsight">Awaiting your data.</p>
            </div>
            <div class="insight-block">
              <h4>Personalized suggestions</h4>
              <ul id="suggestionsList">
                <li>Complete a log to unlock suggestions.</li>
              </ul>
            </div>
          </div>

          <div class="chart-card">
            <h3>Daily balance</h3>
            <canvas id="balanceChart" height="200"></canvas>
            <p class="helper" id="chartNote">
              This chart updates when you calculate a score.
            </p>
          </div>
        </div>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
  </body>
</html>
